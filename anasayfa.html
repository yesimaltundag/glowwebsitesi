<!DOCTYPE html>
<html lang="tr" ng-app="GirisApp">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Ana Sayfa - GLOW</title>

    <!-- Theme Flash Fix: Sayfa y√ºklenmeden √∂nce tema uygula -->
    <script>
      (function() {
        // LocalStorage'tan tema oku ve hemen uygula
        var savedTheme = localStorage.getItem("selectedTheme") || "default";
        document.documentElement.className = 'loading-theme';
        
        if (savedTheme === 'dark') {
          document.documentElement.className += ' dark-theme';
        } else if (savedTheme === 'light') {
          document.documentElement.className += ' light-theme';
        } else {
          document.documentElement.className += ' default-theme';
        }
      })();
    </script>

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/style.css" />

    <!-- AngularJS -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <script src="/assets/js/app.js"></script>
    <link rel="stylesheet" href="assets/css/style.css" />
    
  </head>
  <body ng-controller="MainController">
    <!-- Header Component -->
    <ng-include src="'components/header.html'"></ng-include>

    <!-- Main Content -->
    <main class="main-content">
      <div class="homepage-container" ng-controller="AnasayfaController">
        <div>
          <!-- Logo Section -->

          <!-- Ana Slider Section -->
          <div class="ana-slider-container">
            <div
              class="ana-slider"
              ng-style="{'transform': 'translateX(-' + (currentAnaSlide * 100) + '%)'}"
            >
              <div
                class="ana-slide"
                ng-repeat="slide in anaSliderFotograflari"
                ng-click="slideClick(slide)"
              >
                <img ng-src="{{slide.url}}" alt="{{slide.baslik}}" />
                <div class="ana-slide-overlay">
                  <div class="ana-slide-title">{{slide.baslik}}</div>
                  <div class="ana-slide-desc">{{slide.aciklama}}</div>
                </div>
              </div>
            </div>

            <!-- Navigation Buttons -->
            <span class="ana-slider-nav prev" ng-click="prevAnaSlide()">‚óÄ</span>
            <span class="ana-slider-nav next" ng-click="nextAnaSlide()">‚ñ∂</span>

            <!-- Dots -->
            <div class="ana-slider-dots">
              <div
                class="ana-slider-dot"
                ng-repeat="(index, slide) in anaSliderFotograflari"
                ng-class="{'active': index === currentAnaSlide}"
                ng-click="goToAnaSlide(index)"
              ></div>
            </div>
          </div>

          <div class="card-grid">
            <!-- Yazƒ±lar -->
            <div class="card">
              <img src="assets/images/yazilar.webp" alt="Yazƒ±lar" />
              <div class="card-content">
                <h3>Yazƒ±lar</h3>
                <p>En yeni yazƒ±larƒ±mƒ±zƒ± ke≈üfedin ve ilham alƒ±n.</p>
                <button ng-click="gotoYazilar()">Oku Daha Fazla</button>
              </div>
            </div>

            <!-- Seyahat -->
            <div class="card">
              <img src="assets/images/seyahat.jpg" alt="Seyahat" />
              <div class="card-content">
                <h3>Seyahat</h3>
                <p>Gezdiƒüimiz yerlerden ilham alƒ±n ve yeni rotalar ke≈üfedin.</p>
                <button ng-click="gotoSeyahat()">Oku Daha Fazla</button>
              </div>
            </div>

            <!-- Show -->
            <div class="card">
              <img src="assets/images/show.jpg" alt="Show" />
              <div class="card-content">
                <h3>Show</h3>
                <p>G√∂steri ve etkinliklere dair i√ßerikler burada.</p>
                <button ng-click="gotoShow()">Oku Daha Fazla</button>
              </div>
            </div>

            <!-- Sanat -->
            <div class="card">
              <img src="assets/images/sanat.jpg" alt="Sanat" />
              <div class="card-content">
                <h3>Sanat</h3>
                <p>Sanatƒ±n farklƒ± dallarƒ±nƒ± ke≈üfet ve ilham al!</p>
                <button ng-click="gotoSanat()">Oku Daha Fazla</button>
              </div>
            </div>

            <!-- Yemekler -->
            <div class="card">
              <img src="assets/images/yemekler.jpg" alt="Yemekler" />
              <div class="card-content">
                <h3>Yemekler</h3>
                <p>
                  D√ºnya mutfaƒüƒ±ndan lezzetli tarifler ve yemek √∂nerileri burada.
                </p>
                <button ng-click="gotoYemekler()">Oku Daha Fazla</button>
              </div>
            </div>

            <!-- Spor -->
            <div class="card">
              <img src="assets/images/spor.jpg" alt="Spor" />
              <div class="card-content">
                <h3>Spor</h3>
                <p>
                  Saƒülƒ±klƒ± ya≈üam ve sporla ilgili motivasyon dolu i√ßerikler.
                </p>
                <button ng-click="gotoSpor()">Oku Daha Fazla</button>
              </div>
            </div>
          </div>

          <!-- Kitaplar Carousel Section -->
          <h2 class="kitaplar-carousel-baslik">Kitaplar</h2>
          <div class="kitaplar-carousel-wrapper">
            <div
              class="kitaplar-carousel"
              ng-style="{'transform': 'translateX(-' + (currentKitapSlide * 280) + 'px)'}"
            >
              <div
                class="kitap-carousel-slide"
                ng-repeat="kitap in kitaplarCarousel"
                ng-click="kitapCarouselClick(kitap)"
              >
                <div class="kitap-carousel-card">
                  <img ng-src="{{kitap.foto}}" alt="{{kitap.ad}}" />
                  <div class="kitap-carousel-overlay">
                    <div class="kitap-carousel-title">{{kitap.ad}}</div>
                    <div class="kitap-carousel-author">{{kitap.yazar}}</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Kitaplar Carousel Navigation -->
            <span class="kitap-carousel-nav prev" ng-click="prevKitapSlide()"
              >‚óÄ</span
            >
            <span class="kitap-carousel-nav next" ng-click="nextKitapSlide()"
              >‚ñ∂</span
            >
          </div>

          <!-- Filmler Carousel Section -->
          <h2 class="filmler-carousel-baslik">Filmler</h2>
          <div class="filmler-carousel-wrapper">
            <!-- Loading durumu -->
            <div ng-if="filmlerCarousel.length === 0" class="filmler-loading">
              <div class="loading-spinner"></div>
              <p>Filmler y√ºkleniyor...</p>
            </div>

            <!-- Filmler carousel -->
            <div
              class="filmler-carousel"
              ng-if="filmlerCarousel.length > 0"
              ng-style="{'transform': 'translateX(-' + (currentFilmSlide * 280) + 'px)'}"
            >
              <div
                class="film-carousel-slide"
                ng-repeat="film in filmlerCarousel"
                ng-click="filmCarouselClick(film)"
              >
                <div class="film-carousel-card">
                  <img ng-src="{{film.poster_url}}" alt="{{film.film_adi}}" />
                  <div class="film-carousel-overlay">
                    <div class="film-carousel-title">{{film.film_adi}}</div>
                    <div class="film-carousel-director">{{film.yonetmen}}</div>
                    <div class="film-carousel-rating">
                      ‚≠ê {{film.imdb_puani}}
                    </div>
                    <div class="film-carousel-year">{{film.yil}}</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Filmler Carousel Navigation -->
            <span
              class="film-carousel-nav prev"
              ng-if="filmlerCarousel.length > 0"
              ng-click="prevFilmSlide()"
              >‚óÄ</span
            >
            <span
              class="film-carousel-nav next"
              ng-if="filmlerCarousel.length > 0"
              ng-click="nextFilmSlide()"
              >‚ñ∂</span
            >
          </div>

          <!-- Diƒüer Carousel Section -->
          <h2 class="diger-carousel-baslik">Diƒüer</h2>
          <div class="diger-carousel-wrapper">
            <!-- Loading durumu -->
            <div ng-if="digerCarousel.length === 0" class="diger-loading">
              <div class="loading-spinner"></div>
              <p>ƒ∞√ßerikler y√ºkleniyor...</p>
            </div>

            <!-- Diƒüer carousel -->
            <div
              class="diger-carousel"
              ng-if="digerCarousel.length > 0"
              ng-style="{'transform': 'translateX(-' + (currentDigerSlide * 280) + 'px)'}"
            >
              <div
                class="diger-carousel-slide"
                ng-repeat="item in digerCarousel"
                ng-click="digerCarouselClick(item)"
              >
                <div class="diger-carousel-card">
                  <img
                    ng-src="{{item.foto || item.kapak_url || 'assets/images/logo.jpg'}}"
                    alt="{{item.ad || item.eser_adi || item.anime_adi}}"
                  />
                  <div class="diger-carousel-overlay">
                    <div class="diger-carousel-title">
                      {{item.ad || item.eser_adi || item.anime_adi}}
                    </div>
                    <div class="diger-carousel-subtitle">
                      {{item.yazar || item.yonetmen || item.yayin_evi}}
                    </div>
                    <div
                      class="diger-carousel-rating"
                      ng-if="item.puan || item.imdb_puani"
                    >
                      ‚≠ê {{item.puan || item.imdb_puani}}
                    </div>
                    <div class="diger-carousel-type">{{item.tip}}</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Diƒüer Carousel Navigation -->
            <span
              class="diger-carousel-nav prev"
              ng-if="digerCarousel.length > 0"
              ng-click="prevDigerSlide()"
              >‚óÄ</span
            >
            <span
              class="diger-carousel-nav next"
              ng-if="digerCarousel.length > 0"
              ng-click="nextDigerSlide()"
              >‚ñ∂</span
            >
          </div>
        </div>
      </div>
    </main>

    <!-- Footer Component -->
    <ng-include src="'components/footer.html'"></ng-include>

    <!-- Scroll to Top Button -->
    <button id="scrollTopBtn" title="Yukarƒ± √áƒ±k" ng-click="scrollToTop()">
      ‚Üë
    </button>
    <script>
      angular
        .module("GirisApp")
        .controller("MainController", function ($scope) {
          $scope.scrollToTop = function () {
            window.scrollTo({ top: 0, behavior: "smooth" });
          };
        })
        .controller("AnasayfaController", function ($scope, $http) {
          // Ana slider deƒüi≈ükenleri
          $scope.currentAnaSlide = 0;
          $scope.anaSliderFotograflari = [
            {
              url: "assets/images/yazilar1.jpg",
              baslik: "Yazƒ±lar",
              aciklama: "En yeni yazƒ±larƒ±mƒ±zƒ± ke≈üfedin ve ilham alƒ±n",
              sayfa: "yazilar.html",
            },
            {
              url: "assets/images/show1.jpg",
              baslik: "Show",
              aciklama: "G√∂steri ve etkinliklere dair i√ßerikler burada",
              sayfa: "show.html",
            },
            {
              url: "assets/images/seyahat1.jpg",
              baslik: "Seyahat",
              aciklama:
                "Gezdiƒüimiz yerlerden ilham alƒ±n ve yeni rotalar ke≈üfedin",
              sayfa: "seyahat.html",
            },
            {
              url: "assets/images/yemekler1.jpg",
              baslik: "Yemekler",
              aciklama:
                "D√ºnya mutfaƒüƒ±ndan lezzetli tarifler ve yemek √∂nerileri",
              sayfa: "yemekler.html",
            },
            {
              url: "assets/images/spor1.jpg",
              baslik: "Spor",
              aciklama:
                "Saƒülƒ±klƒ± ya≈üam ve sporla ilgili motivasyon dolu i√ßerikler",
              sayfa: "spor.html",
            },
            {
              url: "assets/images/sanat1.jpg",
              baslik: "Sanat",
              aciklama: "Sanatƒ±n farklƒ± dallarƒ±nƒ± ke≈üfet ve ilham al!",
              sayfa: "sanat-kategoriler.html",
            },
          ];

          // Ana slider fonksiyonlarƒ± - Sonsuz d√∂ng√º
          $scope.nextAnaSlide = function () {
            $scope.currentAnaSlide++;
            if ($scope.currentAnaSlide >= $scope.anaSliderFotograflari.length) {
              $scope.currentAnaSlide = 0; // Ba≈üa d√∂n
            }
          };

          $scope.prevAnaSlide = function () {
            $scope.currentAnaSlide--;
            if ($scope.currentAnaSlide < 0) {
              $scope.currentAnaSlide = $scope.anaSliderFotograflari.length - 1; // Sona git
            }
          };

          $scope.goToAnaSlide = function (index) {
            $scope.currentAnaSlide = index;
          };

          // Slider fotoƒürafƒ±na tƒ±klama fonksiyonu
          $scope.slideClick = function (slide) {
            if (slide.sayfa) {
              window.location.href = slide.sayfa;
            }
          };

          // Otomatik slider - 5 saniyede bir deƒüi≈ü
          setInterval(function () {
            $scope.$apply(function () {
              $scope.nextAnaSlide();
            });
          }, 5000);

          // Sanat resimleri verisi
          $scope.sanatResimleri = [
            {
              baslik: "Mona Lisa",
              sanatci: "Leonardo da Vinci",
              tarih: "1503-1519",
              resim:
                "https://upload.wikimedia.org/wikipedia/commons/thumb/e/ec/Mona_Lisa%2C_by_Leonardo_da_Vinci%2C_from_C2RMF_retouched.jpg/687px-Mona_Lisa%2C_by_Leonardo_da_Vinci%2C_from_C2RMF_retouched.jpg",
              tarihce:
                "Mona Lisa, Leonardo da Vinci'nin en √ºnl√º eseridir. ƒ∞talyan R√∂nesans d√∂neminde yapƒ±lan bu portre, d√ºnya sanat tarihinin en deƒüerli ve en √ßok tanƒ±nan eserlerinden biridir. Eserin gizemli g√ºl√ºmsemesi ve sfumato tekniƒüi ile yapƒ±lan yumu≈üak ge√ßi≈üler, sanat tarihinde devrim yaratmƒ±≈ütƒ±r. ≈ûu anda Paris'teki Louvre M√ºzesi'nde sergilenmektedir.",
            },
            {
              baslik: "Yƒ±ldƒ±zlƒ± Gece",
              sanatci: "Vincent van Gogh",
              tarih: "1889",
              resim:
                "https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/Van_Gogh_-_Starry_Night_-_Google_Art_Project.jpg/1280px-Van_Gogh_-_Starry_Night_-_Google_Art_Project.jpg",
              tarihce:
                "Yƒ±ldƒ±zlƒ± Gece, Van Gogh'un en √ºnl√º eserlerinden biridir. Sanat√ßƒ±nƒ±n Saint-R√©my-de-Provence'daki akƒ±l hastanesinde kaldƒ±ƒüƒ± d√∂nemde yapƒ±lmƒ±≈ütƒ±r. Eser, gecenin dinamik ve hareketli bir yorumunu sunar. D√∂nen bulutlar ve parlayan yƒ±ldƒ±zlar, sanat√ßƒ±nƒ±n i√ß d√ºnyasƒ±nƒ±n yoƒüun duygusal durumunu yansƒ±tƒ±r. Modern sanatƒ±n en etkili eserlerinden biri olarak kabul edilir.",
            },
            {
              baslik: "Guernica",
              sanatci: "Pablo Picasso",
              tarih: "1937",
              resim:
                "https://upload.wikimedia.org/wikipedia/en/7/74/PicassoGuernica.jpg",
              tarihce:
                "Guernica, Picasso'nun ƒ∞spanya ƒ∞√ß Sava≈üƒ± sƒ±rasƒ±nda Nazi Almanyasƒ±'nƒ±n Guernica ≈üehrini bombalamasƒ± √ºzerine yaptƒ±ƒüƒ± g√º√ßl√º bir anti-sava≈ü eseridir. Siyah, beyaz ve gri tonlarƒ±nda yapƒ±lan eser, sava≈üƒ±n deh≈üetini ve acƒ±sƒ±nƒ± dramatik bir ≈üekilde yansƒ±tƒ±r. Modern sanatƒ±n en √∂nemli politik eserlerinden biri olarak kabul edilir ve barƒ±≈üƒ±n sembol√º haline gelmi≈ütir.",
            },
            {
              baslik: "√áƒ±ƒülƒ±k",
              sanatci: "Edvard Munch",
              tarih: "1893",
              resim:
                "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Edvard_Munch%2C_1893%2C_The_Scream%2C_oil%2C_tempera_and_pastel_on_cardboard%2C_91_x_73_cm%2C_National_Gallery_of_Norway.jpg/1280px-Edvard_Munch%2C_1893%2C_The_Scream%2C_oil%2C_tempera_and_pastel_on_cardboard%2C_91_x_73_cm%2C_National_Gallery_of_Norway.jpg",
              tarihce:
                "√áƒ±ƒülƒ±k, Edvard Munch'un en √ºnl√º eseridir ve ekspresyonist sanatƒ±n simgesi haline gelmi≈ütir. Eser, modern insanƒ±n varolu≈üsal kaygƒ±sƒ±nƒ± ve yalnƒ±zlƒ±ƒüƒ±nƒ± g√º√ßl√º bir ≈üekilde ifade eder. Dalgalƒ± √ßizgiler ve yoƒüun renkler kullanƒ±larak yapƒ±lan eser, sanat√ßƒ±nƒ±n i√ß d√ºnyasƒ±ndaki huzursuzluƒüu ve toplumsal deƒüi≈üimlerin yarattƒ±ƒüƒ± stresi yansƒ±tƒ±r.",
            },
            {
              baslik: "Son Ak≈üam Yemeƒüi",
              sanatci: "Leonardo da Vinci",
              tarih: "1495-1498",
              resim:
                "https://upload.wikimedia.org/wikipedia/commons/thumb/4/4b/%C3%9Altima_Cena_-_Da_Vinci_5.jpg/1280px-%C3%9Altima_Cena_-_Da_Vinci_5.jpg",
              tarihce:
                "Son Ak≈üam Yemeƒüi, Leonardo da Vinci'nin Milano'daki Santa Maria delle Grazie manastƒ±rƒ±nƒ±n yemek salonunda yaptƒ±ƒüƒ± fresk eseridir. ƒ∞sa'nƒ±n havarileriyle son ak≈üam yemeƒüini yediƒüi anƒ± tasvir eder. Perspektif kullanƒ±mƒ± ve karakterlerin duygusal ifadeleri ile R√∂nesans sanatƒ±nƒ±n en √∂nemli eserlerinden biri olarak kabul edilir.",
            },
            {
              baslik: "Ven√ºs'√ºn Doƒüu≈üu",
              sanatci: "Sandro Botticelli",
              tarih: "1485",
              resim:
                "https://upload.wikimedia.org/wikipedia/commons/thumb/0/0b/Sandro_Botticelli_-_La_nascita_di_Venere_-_Google_Art_Project.jpg/1280px-Sandro_Botticelli_-_La_nascita_di_Venere_-_Google_Art_Project.jpg",
              tarihce:
                "Ven√ºs'√ºn Doƒüu≈üu, Botticelli'nin en √ºnl√º eserlerinden biridir. Antik Yunan mitolojisinden esinlenen eser, g√ºzellik tanrƒ±√ßasƒ± Ven√ºs'√ºn deniz k√∂p√ºƒü√ºnden doƒüu≈üunu tasvir eder. R√∂nesans d√∂neminin en g√ºzel eserlerinden biri olarak kabul edilir ve klasik mitolojinin yeniden canlandƒ±rƒ±lmasƒ±nƒ±n simgesi haline gelmi≈ütir.",
            },
          ];

          // Modal durumlarƒ±
          $scope.sanatGaleriModalGoster = false;
          $scope.sanatModalGoster = false;
          $scope.seciliSanat = null;

          // Sanat galerisi a√ßma fonksiyonu
          $scope.sanatGaleriAc = function () {
            $scope.sanatGaleriModalGoster = true;
            document.body.style.overflow = "hidden"; // Scroll'u engelle
          };

          // Sanat galerisi kapatma fonksiyonu
          $scope.sanatGaleriModalKapat = function () {
            $scope.sanatGaleriModalGoster = false;
            document.body.style.overflow = "auto"; // Scroll'u geri a√ß
          };

          // Sanat tarih√ßesi g√∂sterme fonksiyonu
          $scope.sanatTarihcesiGoster = function (sanat) {
            $scope.seciliSanat = sanat;
            $scope.sanatModalGoster = true;
            $scope.sanatGaleriModalGoster = false; // Galeri modal'ƒ±nƒ± kapat
          };

          // Sanat tarih√ßesi modal kapatma fonksiyonu
          $scope.sanatModalKapat = function () {
            $scope.sanatModalGoster = false;
            $scope.seciliSanat = null;
            $scope.sanatGaleriModalGoster = true; // Galeri modal'ƒ±nƒ± geri a√ß
          };

          // Sayfa y√∂nlendirme fonksiyonlarƒ±
          $scope.gotoYazilar = function () {
            window.location.href = "yazilar.html";
          };

          $scope.gotoSeyahat = function () {
            window.location.href = "seyahat.html";
          };

          $scope.gotoShow = function () {
            window.location.href = "show.html";
          };

          $scope.gotoSanat = function () {
            window.location.href = "sanat-kategoriler.html";
          };

          $scope.gotoYemekler = function () {
            window.location.href = "yemekler.html";
          };

          $scope.gotoSpor = function () {
            window.location.href = "spor.html";
          };

          // Kitaplar Carousel deƒüi≈ükenleri
          $scope.currentKitapSlide = 0;
          $scope.kitaplarCarousel = [];

          // Kitaplarƒ± veritabanƒ±ndan y√ºkle (her yenilemede rastgele 8 kitap)
          var timestamp = Date.now();
          console.log("API √ßaƒürƒ±sƒ± yapƒ±lƒ±yor, timestamp:", timestamp);
          $http
            .get("kitaplar_api.php?t=" + timestamp + "&r=" + Math.random())
            .then(function (response) {
              console.log("API Response:", response.data);
              if (response.data.success) {
                // Veritabanƒ±ndan gelen verileri carousel formatƒ±na d√∂n√º≈üt√ºr
                $scope.kitaplarCarousel = response.data.kitaplar.map(function (
                  kitap
                ) {
                  return {
                    ad: kitap.kitap_adi,
                    yazar: kitap.yazar,
                    foto: kitap.kapak_url,
                    rating: Math.floor(Math.random() * 3) + 3, // Rastgele rating (3-5)
                    favorites: Math.floor(Math.random() * 1000) + 50, // Rastgele favori sayƒ±sƒ±
                    publisher: "GLOW Yayƒ±nlarƒ±", // Varsayƒ±lan yayƒ±nevi
                  };
                });
                console.log(
                  "Rastgele 8 kitap y√ºklendi:",
                  $scope.kitaplarCarousel.length
                );
              } else {
                console.error(
                  "Kitaplar y√ºklenirken hata:",
                  response.data.error
                );
              }
            })
            .catch(function (error) {
              console.error("Kitaplar y√ºklenirken hata:", error);
            });

          // Kitaplar carousel fonksiyonlarƒ±
          $scope.nextKitapSlide = function () {
            var maxSlide = Math.max(0, $scope.kitaplarCarousel.length - 4);

            // Eƒüer son slide'daysak, ba≈ütan ba≈üla
            if ($scope.currentKitapSlide >= maxSlide) {
              $scope.currentKitapSlide = 0;
            } else {
              $scope.currentKitapSlide = Math.min(
                $scope.currentKitapSlide + 1,
                maxSlide
              );
            }
          };

          $scope.prevKitapSlide = function () {
            // Eƒüer ilk slide'daysak, sona git
            if ($scope.currentKitapSlide <= 0) {
              var maxSlide = Math.max(0, $scope.kitaplarCarousel.length - 4);
              $scope.currentKitapSlide = maxSlide;
            } else {
              $scope.currentKitapSlide = Math.max(
                $scope.currentKitapSlide - 1,
                0
              );
            }
          };

          // Kitap carousel'a tƒ±klama fonksiyonu
          $scope.kitapCarouselClick = function (kitap) {
            // Temiz URL i√ßin kitap adƒ±nƒ± URL-friendly hale getir
            var urlFriendlyKitap = kitap.ad
              .toLowerCase()
              .replace(/[^a-zA-Z0-9√ßƒüƒ±√∂≈ü√º√áƒûIƒ∞√ñ≈û√ú]/g, "-")
              .replace(/-+/g, "-")
              .replace(/^-|-$/g, "");
            // URL encode et
            var encodedKitap = encodeURIComponent(urlFriendlyKitap);
            window.location.href = "kitap/" + encodedKitap;
          };

          // Kitaplar carousel otomatik kaydƒ±rma - 3 saniyede bir
          setInterval(function () {
            $scope.$apply(function () {
              $scope.nextKitapSlide();
            });
          }, 3000);

          // Filmler Carousel deƒüi≈ükenleri
          $scope.currentFilmSlide = 0;
          $scope.filmlerCarousel = [];

          // Filmleri veritabanƒ±ndan y√ºkle (her yenilemede rastgele 8 film)
          var filmTimestamp = Date.now();
          console.log(
            "Filmler API √ßaƒürƒ±sƒ± yapƒ±lƒ±yor, timestamp:",
            filmTimestamp
          );
          $http
            .get("filmler_api.php?t=" + filmTimestamp + "&r=" + Math.random())
            .then(function (response) {
              console.log("Filmler API Response:", response.data);
              if (response.data.success) {
                // Veritabanƒ±ndan gelen verileri carousel formatƒ±na d√∂n√º≈üt√ºr
                $scope.filmlerCarousel = response.data.filmler.map(function (
                  film
                ) {
                  return {
                    id: film.id,
                    film_adi: film.film_adi,
                    yonetmen: film.yonetmen,
                    poster_url: film.poster_url,
                    imdb_puani: film.imdb_puani,
                    yil: film.yil,
                    kategori: film.kategori,
                    tanitim: film.tanitim,
                  };
                });
                console.log(
                  "‚úÖ Rastgele 8 film y√ºklendi:",
                  $scope.filmlerCarousel.length
                );
                console.log("üìΩÔ∏è Filmler:", $scope.filmlerCarousel);
              } else {
                console.error(
                  "‚ùå Filmler y√ºklenirken hata:",
                  response.data.error
                );
                // Hata durumunda bo≈ü array olu≈ütur
                $scope.filmlerCarousel = [];
              }
            })
            .catch(function (error) {
              console.error("‚ùå Filmler y√ºklenirken hata:", error);
              // Hata durumunda bo≈ü array olu≈ütur
              $scope.filmlerCarousel = [];
            });

          // Filmler carousel fonksiyonlarƒ±
          $scope.nextFilmSlide = function () {
            var maxSlide = Math.max(0, $scope.filmlerCarousel.length - 4);

            // Eƒüer son slide'daysak, ba≈ütan ba≈üla
            if ($scope.currentFilmSlide >= maxSlide) {
              $scope.currentFilmSlide = 0;
            } else {
              $scope.currentFilmSlide = Math.min(
                $scope.currentFilmSlide + 1,
                maxSlide
              );
            }
          };

          $scope.prevFilmSlide = function () {
            // Eƒüer ilk slide'daysak, sona git
            if ($scope.currentFilmSlide <= 0) {
              var maxSlide = Math.max(0, $scope.filmlerCarousel.length - 4);
              $scope.currentFilmSlide = maxSlide;
            } else {
              $scope.currentFilmSlide = Math.max(
                $scope.currentFilmSlide - 1,
                0
              );
            }
          };

          // Film carousel'a tƒ±klama fonksiyonu
          $scope.filmCarouselClick = function (film) {
            window.location.href =
              "film-detay.html?id=" +
              film.id +
              "&film=" +
              encodeURIComponent(film.film_adi);
          };

          // Filmler carousel otomatik kaydƒ±rma - 3 saniyede bir
          setInterval(function () {
            $scope.$apply(function () {
              $scope.nextFilmSlide();
            });
          }, 3000);

          // Diƒüer Carousel deƒüi≈ükenleri
          $scope.currentDigerSlide = 0;
          $scope.digerCarousel = [];

          // Diƒüer i√ßerikleri veritabanƒ±ndan y√ºkle (tiyatro, anime, belgesel)
          console.log("üéØ Diƒüer i√ßerikler y√ºkleniyor...");

          // Tiyatro eserlerini getir
          $http
            .get("api.php?tiyatro=1&limit=3")
            .then(function (tiyatroResponse) {
              console.log("üé≠ Tiyatro response:", tiyatroResponse.data);
              var tiyatroItems = [];
              if (tiyatroResponse.data && Array.isArray(tiyatroResponse.data)) {
                tiyatroItems = tiyatroResponse.data.map(function (eser) {
                  return {
                    id: eser.id,
                    ad: eser.eser_adi,
                    yazar: eser.yazar,
                    foto: eser.kapak_url || "assets/images/logo.jpg",
                    puan: eser.puan,
                    tip: "Tiyatro",
                    sayfa: "tiyatro-detay.html",
                  };
                });
              }

              // Animeleri getir
              $http
                .get("api.php?anime=1&limit=3")
                .then(function (animeResponse) {
                  console.log("üé¨ Anime response:", animeResponse.data);
                  var animeItems = [];
                  if (animeResponse.data && Array.isArray(animeResponse.data)) {
                    animeItems = animeResponse.data.map(function (anime) {
                      return {
                        id: anime.id,
                        ad: anime.anime_adi,
                        yazar: anime.yonetmen,
                        foto: anime.kapak_url || "assets/images/logo.jpg",
                        puan: anime.puan,
                        tip: "Anime",
                        sayfa: "anime-detay.html",
                      };
                    });
                  }

                  // Belgeselleri getir
                  $http
                    .get("api.php?belgesel=1&limit=4")
                    .then(function (belgeselResponse) {
                      console.log(
                        "üì∫ Belgesel response:",
                        belgeselResponse.data
                      );
                      var belgeselItems = [];
                      if (
                        belgeselResponse.data &&
                        Array.isArray(belgeselResponse.data)
                      ) {
                        belgeselItems = belgeselResponse.data.map(function (
                          belgesel
                        ) {
                          return {
                            id: belgesel.id,
                            ad: belgesel.belgesel_adi,
                            yazar: belgesel.yonetmen,
                            foto:
                              belgesel.kapak_url || "assets/images/logo.jpg",
                            puan: belgesel.puan,
                            tip: "Belgesel",
                            sayfa: "belgesel-detay.html",
                          };
                        });
                      }

                      // T√ºm i√ßerikleri birle≈ütir ve karƒ±≈ütƒ±r
                      $scope.digerCarousel = tiyatroItems
                        .concat(animeItems)
                        .concat(belgeselItems);

                      // Array'i karƒ±≈ütƒ±r
                      for (
                        var i = $scope.digerCarousel.length - 1;
                        i > 0;
                        i--
                      ) {
                        var j = Math.floor(Math.random() * (i + 1));
                        var temp = $scope.digerCarousel[i];
                        $scope.digerCarousel[i] = $scope.digerCarousel[j];
                        $scope.digerCarousel[j] = temp;
                      }

                      console.log(
                        "‚úÖ Diƒüer i√ßerikler y√ºklendi:",
                        $scope.digerCarousel.length
                      );
                      console.log("üé≠ Tiyatro:", tiyatroItems.length);
                      console.log("üé¨ Anime:", animeItems.length);
                      console.log("üì∫ Belgesel:", belgeselItems.length);
                    })
                    .catch(function (error) {
                      console.error("‚ùå Belgeseller y√ºklenirken hata:", error);
                      // Hata durumunda bo≈ü array ile devam et
                      $scope.digerCarousel = tiyatroItems.concat(animeItems);
                    });
                })
                .catch(function (error) {
                  console.error("‚ùå Animeler y√ºklenirken hata:", error);
                  // Hata durumunda sadece tiyatro ile devam et
                  $scope.digerCarousel = tiyatroItems;
                });
            })
            .catch(function (error) {
              console.error("‚ùå Tiyatro eserleri y√ºklenirken hata:", error);
              // T√ºm API'ler ba≈üarƒ±sƒ±z olursa bo≈ü array
              $scope.digerCarousel = [];
            });

          // Diƒüer carousel fonksiyonlarƒ±
          $scope.nextDigerSlide = function () {
            var maxSlide = Math.max(0, $scope.digerCarousel.length - 4);

            // Eƒüer son slide'daysak, ba≈ütan ba≈üla
            if ($scope.currentDigerSlide >= maxSlide) {
              $scope.currentDigerSlide = 0;
            } else {
              $scope.currentDigerSlide = Math.min(
                $scope.currentDigerSlide + 1,
                maxSlide
              );
            }
          };

          $scope.prevDigerSlide = function () {
            // Eƒüer ilk slide'daysak, sona git
            if ($scope.currentDigerSlide <= 0) {
              var maxSlide = Math.max(0, $scope.digerCarousel.length - 4);
              $scope.currentDigerSlide = maxSlide;
            } else {
              $scope.currentDigerSlide = Math.max(
                $scope.currentDigerSlide - 1,
                0
              );
            }
          };

          // Diƒüer carousel'a tƒ±klama fonksiyonu
          $scope.digerCarouselClick = function (item) {
            window.location.href = item.sayfa + "?id=" + item.id;
          };

          // Diƒüer carousel otomatik kaydƒ±rma - 4 saniyede bir
          setInterval(function () {
            $scope.$apply(function () {
              $scope.nextDigerSlide();
            });
          }, 4000);
        });
    </script>
  </body>
</html>
