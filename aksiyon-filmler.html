<!DOCTYPE html>
<html lang="tr" ng-app="GirisApp">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aksiyon Filmler - GLOW</title>
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/film-styles.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <script src="assets/js/app.js"></script>
  </head>
  </head>
  <body ng-controller="AksiyonFilmlerController">
    <div ng-include="'components/header.html'"></div>

    <div class="filmler-container">
      <button class="geri-btn" onclick="window.history.back()" title="Geri D√∂n">
        ‚Üê
      </button>
      <h1 class="filmler-title">üí• Aksiyon Filmler</h1>

      <!-- Loading -->
      <div class="loading" ng-if="loading">
        <p>Filmler y√ºkleniyor...</p>
      </div>

      <!-- Error -->
      <div class="error" ng-if="error">
        <p>{{ error }}</p>
      </div>

      <!-- Filmler Grid -->
      <div class="filmler-grid" ng-if="!loading && !error">
        <div
          class="film-card"
          ng-repeat="film in filmler"
          ng-click="filmDetay(film.id)"
        >
          <img
            ng-src="{{ film.poster_url }}"
            ng-alt="{{ film.film_adi }}"
            class="film-poster"
            onerror="this.src='assets/images/logo.jpg'"
          />
          <div class="film-icerik">
            <div class="film-baslik">{{ film.film_adi }}</div>
            <div class="film-yil">{{ film.yil }}</div>
            <div class="film-imdb">‚≠ê IMDb: {{ film.imdb_puani }}</div>
            <div class="film-ozet">
              {{ film.ozet | limitTo: 100 }}{{ film.ozet.length > 100 ? '...' :
              '' }}
            </div>
            <button class="film-btn">Detaylarƒ± G√∂r</button>
          </div>
        </div>
      </div>
    </div>

    <div ng-include="'components/footer.html'"></div>
    
    <!-- Scroll to Top Button -->
    <button id="scrollTopBtn" title="Yukarƒ± √áƒ±k" ng-click="scrollToTop()">‚Üë</button>
  </body>
</html>

<script>
  angular
    .module("GirisApp")
    .controller("AksiyonFilmlerController", function ($scope, $http) {
      $scope.loading = true;
      $scope.error = null;
      $scope.filmler = [];

      // Veritabanƒ±ndan filmleri √ßek
      $http
        .get("api.php?films=1&kategori=Aksiyon")
        .then(function (response) {
          $scope.filmler = response.data;
          $scope.loading = false;
        })
        .catch(function (error) {
          $scope.error =
            "Filmler y√ºklenirken hata olu≈ütu: " + error.data.message;
          $scope.loading = false;
        });

      $scope.filmDetay = function (filmId) {
        window.location.href = "film-detay.html?id=" + filmId;
      };

      $scope.scrollToTop = function () {
        window.scrollTo({ top: 0, behavior: "smooth" });
      };
    });
</script>
