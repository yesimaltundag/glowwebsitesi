<!DOCTYPE html>
<html lang="tr" ng-app="GirisApp">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Ana Sayfa - GLOW</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/style.css" />

    <!-- AngularJS -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <script src="/assets/js/app.js"></script>
    <link rel="stylesheet" href="assets/css/style.css" />
    
  </head>
  <body ng-controller="MainController">
    <!-- Header Component -->
    <ng-include src="'components/header.html'"></ng-include>

    <!-- Main Content -->
    <main class="main-content">
      <div class="homepage-container" ng-controller="AnasayfaController">
        <div>
          <!-- Logo Section -->

          <!-- Ana Slider Section -->
          <div class="ana-slider-container">
            <div
              class="ana-slider"
              ng-style="{'transform': 'translateX(-' + (currentAnaSlide * 100) + '%)'}"
            >
              <div
                class="ana-slide"
                ng-repeat="slide in anaSliderFotograflari"
                ng-click="slideClick(slide)"
              >
                <img ng-src="{{slide.url}}" alt="{{slide.baslik}}" />
                <div class="ana-slide-overlay">
                  <div class="ana-slide-title">{{slide.baslik}}</div>
                  <div class="ana-slide-desc">{{slide.aciklama}}</div>
                </div>
              </div>
            </div>

            <!-- Navigation Buttons -->
            <span class="ana-slider-nav prev" ng-click="prevAnaSlide()">â—€</span>
            <span class="ana-slider-nav next" ng-click="nextAnaSlide()">â–¶</span>

            <!-- Dots -->
            <div class="ana-slider-dots">
              <div
                class="ana-slider-dot"
                ng-repeat="(index, slide) in anaSliderFotograflari"
                ng-class="{'active': index === currentAnaSlide}"
                ng-click="goToAnaSlide(index)"
              ></div>
            </div>
          </div>

          <div class="card-grid">
            <!-- YazÄ±lar -->
            <div class="card">
              <img src="assets/images/yazilar.webp" alt="YazÄ±lar" />
              <div class="card-content">
                <h3>YazÄ±lar</h3>
                <p>En yeni yazÄ±larÄ±mÄ±zÄ± keÅŸfedin ve ilham alÄ±n.</p>
                <button ng-click="gotoYazilar()">Oku Daha Fazla</button>
              </div>
            </div>

            <!-- Seyahat -->
            <div class="card">
              <img src="assets/images/seyahat.jpg" alt="Seyahat" />
              <div class="card-content">
                <h3>Seyahat</h3>
                <p>GezdiÄŸimiz yerlerden ilham alÄ±n ve yeni rotalar keÅŸfedin.</p>
                <button ng-click="gotoSeyahat()">Oku Daha Fazla</button>
              </div>
            </div>

            <!-- Show -->
            <div class="card">
              <img src="assets/images/show.jpg" alt="Show" />
              <div class="card-content">
                <h3>Show</h3>
                <p>GÃ¶steri ve etkinliklere dair iÃ§erikler burada.</p>
                <button ng-click="gotoShow()">Oku Daha Fazla</button>
              </div>
            </div>

            <!-- Sanat -->
            <div class="card">
              <img src="assets/images/sanat.jpg" alt="Sanat" />
              <div class="card-content">
                <h3>Sanat</h3>
                <p>SanatÄ±n farklÄ± dallarÄ±nÄ± keÅŸfet ve ilham al!</p>
                <button ng-click="gotoSanat()">Oku Daha Fazla</button>
              </div>
            </div>

            <!-- Yemekler -->
            <div class="card">
              <img src="assets/images/yemekler.jpg" alt="Yemekler" />
              <div class="card-content">
                <h3>Yemekler</h3>
                <p>
                  DÃ¼nya mutfaÄŸÄ±ndan lezzetli tarifler ve yemek Ã¶nerileri burada.
                </p>
                <button ng-click="gotoYemekler()">Oku Daha Fazla</button>
              </div>
            </div>

            <!-- Spor -->
            <div class="card">
              <img src="assets/images/spor.jpg" alt="Spor" />
              <div class="card-content">
                <h3>Spor</h3>
                <p>
                  SaÄŸlÄ±klÄ± yaÅŸam ve sporla ilgili motivasyon dolu iÃ§erikler.
                </p>
                <button ng-click="gotoSpor()">Oku Daha Fazla</button>
              </div>
            </div>
          </div>

          <!-- Kitaplar Carousel Section -->
          <h2 class="kitaplar-carousel-baslik">Kitaplar</h2>
          <div class="kitaplar-carousel-wrapper">
            <div
              class="kitaplar-carousel"
              ng-style="{'transform': 'translateX(-' + (currentKitapSlide * 280) + 'px)'}"
            >
              <div
                class="kitap-carousel-slide"
                ng-repeat="kitap in kitaplarCarousel"
                ng-click="kitapCarouselClick(kitap)"
              >
                <div class="kitap-carousel-card">
                  <img ng-src="{{kitap.foto}}" alt="{{kitap.ad}}" />
                  <div class="kitap-carousel-overlay">
                    <div class="kitap-carousel-title">{{kitap.ad}}</div>
                    <div class="kitap-carousel-author">{{kitap.yazar}}</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Kitaplar Carousel Navigation -->
            <span class="kitap-carousel-nav prev" ng-click="prevKitapSlide()"
              >â—€</span
            >
            <span class="kitap-carousel-nav next" ng-click="nextKitapSlide()"
              >â–¶</span
            >
          </div>

          <!-- Filmler Carousel Section -->
          <h2 class="filmler-carousel-baslik">Filmler</h2>
          <div class="filmler-carousel-wrapper">
            <!-- Loading durumu -->
            <div ng-if="filmlerCarousel.length === 0" class="filmler-loading">
              <div class="loading-spinner"></div>
              <p>Filmler yÃ¼kleniyor...</p>
            </div>

            <!-- Filmler carousel -->
            <div
              class="filmler-carousel"
              ng-if="filmlerCarousel.length > 0"
              ng-style="{'transform': 'translateX(-' + (currentFilmSlide * 280) + 'px)'}"
            >
              <div
                class="film-carousel-slide"
                ng-repeat="film in filmlerCarousel"
                ng-click="filmCarouselClick(film)"
              >
                <div class="film-carousel-card">
                  <img ng-src="{{film.poster_url}}" alt="{{film.film_adi}}" />
                  <div class="film-carousel-overlay">
                    <div class="film-carousel-title">{{film.film_adi}}</div>
                    <div class="film-carousel-director">{{film.yonetmen}}</div>
                    <div class="film-carousel-rating">
                      â­ {{film.imdb_puani}}
                    </div>
                    <div class="film-carousel-year">{{film.yil}}</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Filmler Carousel Navigation -->
            <span
              class="film-carousel-nav prev"
              ng-if="filmlerCarousel.length > 0"
              ng-click="prevFilmSlide()"
              >â—€</span
            >
            <span
              class="film-carousel-nav next"
              ng-if="filmlerCarousel.length > 0"
              ng-click="nextFilmSlide()"
              >â–¶</span
            >
          </div>

          <!-- DiÄŸer Carousel Section -->
          <h2 class="diger-carousel-baslik">DiÄŸer</h2>
          <div class="diger-carousel-wrapper">
            <!-- Loading durumu -->
            <div ng-if="digerCarousel.length === 0" class="diger-loading">
              <div class="loading-spinner"></div>
              <p>Ä°Ã§erikler yÃ¼kleniyor...</p>
            </div>

            <!-- DiÄŸer carousel -->
            <div
              class="diger-carousel"
              ng-if="digerCarousel.length > 0"
              ng-style="{'transform': 'translateX(-' + (currentDigerSlide * 280) + 'px)'}"
            >
              <div
                class="diger-carousel-slide"
                ng-repeat="item in digerCarousel"
                ng-click="digerCarouselClick(item)"
              >
                <div class="diger-carousel-card">
                  <img
                    ng-src="{{item.foto || item.kapak_url || 'assets/images/logo.jpg'}}"
                    alt="{{item.ad || item.eser_adi || item.anime_adi}}"
                  />
                  <div class="diger-carousel-overlay">
                    <div class="diger-carousel-title">
                      {{item.ad || item.eser_adi || item.anime_adi}}
                    </div>
                    <div class="diger-carousel-subtitle">
                      {{item.yazar || item.yonetmen || item.yayin_evi}}
                    </div>
                    <div
                      class="diger-carousel-rating"
                      ng-if="item.puan || item.imdb_puani"
                    >
                      â­ {{item.puan || item.imdb_puani}}
                    </div>
                    <div class="diger-carousel-type">{{item.tip}}</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- DiÄŸer Carousel Navigation -->
            <span
              class="diger-carousel-nav prev"
              ng-if="digerCarousel.length > 0"
              ng-click="prevDigerSlide()"
              >â—€</span
            >
            <span
              class="diger-carousel-nav next"
              ng-if="digerCarousel.length > 0"
              ng-click="nextDigerSlide()"
              >â–¶</span
            >
          </div>
        </div>
      </div>
    </main>

    <!-- Footer Component -->
    <ng-include src="'components/footer.html'"></ng-include>

    <!-- Scroll to Top Button -->
    <button id="scrollTopBtn" title="YukarÄ± Ã‡Ä±k" ng-click="scrollToTop()">
      â†‘
    </button>
    <script>
      angular
        .module("GirisApp")
        .controller("MainController", function ($scope) {
          $scope.scrollToTop = function () {
            window.scrollTo({ top: 0, behavior: "smooth" });
          };
        })
        .controller("AnasayfaController", function ($scope, $http) {
          // Ana slider deÄŸiÅŸkenleri
          $scope.currentAnaSlide = 0;
          $scope.anaSliderFotograflari = [
            {
              url: "assets/images/yazilar1.jpg",
              baslik: "YazÄ±lar",
              aciklama: "En yeni yazÄ±larÄ±mÄ±zÄ± keÅŸfedin ve ilham alÄ±n",
              sayfa: "yazilar.html",
            },
            {
              url: "assets/images/show1.jpg",
              baslik: "Show",
              aciklama: "GÃ¶steri ve etkinliklere dair iÃ§erikler burada",
              sayfa: "show.html",
            },
            {
              url: "assets/images/seyahat1.jpg",
              baslik: "Seyahat",
              aciklama:
                "GezdiÄŸimiz yerlerden ilham alÄ±n ve yeni rotalar keÅŸfedin",
              sayfa: "seyahat.html",
            },
            {
              url: "assets/images/yemekler1.jpg",
              baslik: "Yemekler",
              aciklama:
                "DÃ¼nya mutfaÄŸÄ±ndan lezzetli tarifler ve yemek Ã¶nerileri",
              sayfa: "yemekler.html",
            },
            {
              url: "assets/images/spor1.jpg",
              baslik: "Spor",
              aciklama:
                "SaÄŸlÄ±klÄ± yaÅŸam ve sporla ilgili motivasyon dolu iÃ§erikler",
              sayfa: "spor.html",
            },
            {
              url: "assets/images/sanat1.jpg",
              baslik: "Sanat",
              aciklama: "SanatÄ±n farklÄ± dallarÄ±nÄ± keÅŸfet ve ilham al!",
              sayfa: "sanat-kategoriler.html",
            },
          ];

          // Ana slider fonksiyonlarÄ± - Sonsuz dÃ¶ngÃ¼
          $scope.nextAnaSlide = function () {
            $scope.currentAnaSlide++;
            if ($scope.currentAnaSlide >= $scope.anaSliderFotograflari.length) {
              $scope.currentAnaSlide = 0; // BaÅŸa dÃ¶n
            }
          };

          $scope.prevAnaSlide = function () {
            $scope.currentAnaSlide--;
            if ($scope.currentAnaSlide < 0) {
              $scope.currentAnaSlide = $scope.anaSliderFotograflari.length - 1; // Sona git
            }
          };

          $scope.goToAnaSlide = function (index) {
            $scope.currentAnaSlide = index;
          };

          // Slider fotoÄŸrafÄ±na tÄ±klama fonksiyonu
          $scope.slideClick = function (slide) {
            if (slide.sayfa) {
              window.location.href = slide.sayfa;
            }
          };

          // Otomatik slider - 5 saniyede bir deÄŸiÅŸ
          setInterval(function () {
            $scope.$apply(function () {
              $scope.nextAnaSlide();
            });
          }, 5000);

          // Sanat resimleri verisi
          $scope.sanatResimleri = [
            {
              baslik: "Mona Lisa",
              sanatci: "Leonardo da Vinci",
              tarih: "1503-1519",
              resim:
                "https://upload.wikimedia.org/wikipedia/commons/thumb/e/ec/Mona_Lisa%2C_by_Leonardo_da_Vinci%2C_from_C2RMF_retouched.jpg/687px-Mona_Lisa%2C_by_Leonardo_da_Vinci%2C_from_C2RMF_retouched.jpg",
              tarihce:
                "Mona Lisa, Leonardo da Vinci'nin en Ã¼nlÃ¼ eseridir. Ä°talyan RÃ¶nesans dÃ¶neminde yapÄ±lan bu portre, dÃ¼nya sanat tarihinin en deÄŸerli ve en Ã§ok tanÄ±nan eserlerinden biridir. Eserin gizemli gÃ¼lÃ¼msemesi ve sfumato tekniÄŸi ile yapÄ±lan yumuÅŸak geÃ§iÅŸler, sanat tarihinde devrim yaratmÄ±ÅŸtÄ±r. Åu anda Paris'teki Louvre MÃ¼zesi'nde sergilenmektedir.",
            },
            {
              baslik: "YÄ±ldÄ±zlÄ± Gece",
              sanatci: "Vincent van Gogh",
              tarih: "1889",
              resim:
                "https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/Van_Gogh_-_Starry_Night_-_Google_Art_Project.jpg/1280px-Van_Gogh_-_Starry_Night_-_Google_Art_Project.jpg",
              tarihce:
                "YÄ±ldÄ±zlÄ± Gece, Van Gogh'un en Ã¼nlÃ¼ eserlerinden biridir. SanatÃ§Ä±nÄ±n Saint-RÃ©my-de-Provence'daki akÄ±l hastanesinde kaldÄ±ÄŸÄ± dÃ¶nemde yapÄ±lmÄ±ÅŸtÄ±r. Eser, gecenin dinamik ve hareketli bir yorumunu sunar. DÃ¶nen bulutlar ve parlayan yÄ±ldÄ±zlar, sanatÃ§Ä±nÄ±n iÃ§ dÃ¼nyasÄ±nÄ±n yoÄŸun duygusal durumunu yansÄ±tÄ±r. Modern sanatÄ±n en etkili eserlerinden biri olarak kabul edilir.",
            },
            {
              baslik: "Guernica",
              sanatci: "Pablo Picasso",
              tarih: "1937",
              resim:
                "https://upload.wikimedia.org/wikipedia/en/7/74/PicassoGuernica.jpg",
              tarihce:
                "Guernica, Picasso'nun Ä°spanya Ä°Ã§ SavaÅŸÄ± sÄ±rasÄ±nda Nazi AlmanyasÄ±'nÄ±n Guernica ÅŸehrini bombalamasÄ± Ã¼zerine yaptÄ±ÄŸÄ± gÃ¼Ã§lÃ¼ bir anti-savaÅŸ eseridir. Siyah, beyaz ve gri tonlarÄ±nda yapÄ±lan eser, savaÅŸÄ±n dehÅŸetini ve acÄ±sÄ±nÄ± dramatik bir ÅŸekilde yansÄ±tÄ±r. Modern sanatÄ±n en Ã¶nemli politik eserlerinden biri olarak kabul edilir ve barÄ±ÅŸÄ±n sembolÃ¼ haline gelmiÅŸtir.",
            },
            {
              baslik: "Ã‡Ä±ÄŸlÄ±k",
              sanatci: "Edvard Munch",
              tarih: "1893",
              resim:
                "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Edvard_Munch%2C_1893%2C_The_Scream%2C_oil%2C_tempera_and_pastel_on_cardboard%2C_91_x_73_cm%2C_National_Gallery_of_Norway.jpg/1280px-Edvard_Munch%2C_1893%2C_The_Scream%2C_oil%2C_tempera_and_pastel_on_cardboard%2C_91_x_73_cm%2C_National_Gallery_of_Norway.jpg",
              tarihce:
                "Ã‡Ä±ÄŸlÄ±k, Edvard Munch'un en Ã¼nlÃ¼ eseridir ve ekspresyonist sanatÄ±n simgesi haline gelmiÅŸtir. Eser, modern insanÄ±n varoluÅŸsal kaygÄ±sÄ±nÄ± ve yalnÄ±zlÄ±ÄŸÄ±nÄ± gÃ¼Ã§lÃ¼ bir ÅŸekilde ifade eder. DalgalÄ± Ã§izgiler ve yoÄŸun renkler kullanÄ±larak yapÄ±lan eser, sanatÃ§Ä±nÄ±n iÃ§ dÃ¼nyasÄ±ndaki huzursuzluÄŸu ve toplumsal deÄŸiÅŸimlerin yarattÄ±ÄŸÄ± stresi yansÄ±tÄ±r.",
            },
            {
              baslik: "Son AkÅŸam YemeÄŸi",
              sanatci: "Leonardo da Vinci",
              tarih: "1495-1498",
              resim:
                "https://upload.wikimedia.org/wikipedia/commons/thumb/4/4b/%C3%9Altima_Cena_-_Da_Vinci_5.jpg/1280px-%C3%9Altima_Cena_-_Da_Vinci_5.jpg",
              tarihce:
                "Son AkÅŸam YemeÄŸi, Leonardo da Vinci'nin Milano'daki Santa Maria delle Grazie manastÄ±rÄ±nÄ±n yemek salonunda yaptÄ±ÄŸÄ± fresk eseridir. Ä°sa'nÄ±n havarileriyle son akÅŸam yemeÄŸini yediÄŸi anÄ± tasvir eder. Perspektif kullanÄ±mÄ± ve karakterlerin duygusal ifadeleri ile RÃ¶nesans sanatÄ±nÄ±n en Ã¶nemli eserlerinden biri olarak kabul edilir.",
            },
            {
              baslik: "VenÃ¼s'Ã¼n DoÄŸuÅŸu",
              sanatci: "Sandro Botticelli",
              tarih: "1485",
              resim:
                "https://upload.wikimedia.org/wikipedia/commons/thumb/0/0b/Sandro_Botticelli_-_La_nascita_di_Venere_-_Google_Art_Project.jpg/1280px-Sandro_Botticelli_-_La_nascita_di_Venere_-_Google_Art_Project.jpg",
              tarihce:
                "VenÃ¼s'Ã¼n DoÄŸuÅŸu, Botticelli'nin en Ã¼nlÃ¼ eserlerinden biridir. Antik Yunan mitolojisinden esinlenen eser, gÃ¼zellik tanrÄ±Ã§asÄ± VenÃ¼s'Ã¼n deniz kÃ¶pÃ¼ÄŸÃ¼nden doÄŸuÅŸunu tasvir eder. RÃ¶nesans dÃ¶neminin en gÃ¼zel eserlerinden biri olarak kabul edilir ve klasik mitolojinin yeniden canlandÄ±rÄ±lmasÄ±nÄ±n simgesi haline gelmiÅŸtir.",
            },
          ];

          // Modal durumlarÄ±
          $scope.sanatGaleriModalGoster = false;
          $scope.sanatModalGoster = false;
          $scope.seciliSanat = null;

          // Sanat galerisi aÃ§ma fonksiyonu
          $scope.sanatGaleriAc = function () {
            $scope.sanatGaleriModalGoster = true;
            document.body.style.overflow = "hidden"; // Scroll'u engelle
          };

          // Sanat galerisi kapatma fonksiyonu
          $scope.sanatGaleriModalKapat = function () {
            $scope.sanatGaleriModalGoster = false;
            document.body.style.overflow = "auto"; // Scroll'u geri aÃ§
          };

          // Sanat tarihÃ§esi gÃ¶sterme fonksiyonu
          $scope.sanatTarihcesiGoster = function (sanat) {
            $scope.seciliSanat = sanat;
            $scope.sanatModalGoster = true;
            $scope.sanatGaleriModalGoster = false; // Galeri modal'Ä±nÄ± kapat
          };

          // Sanat tarihÃ§esi modal kapatma fonksiyonu
          $scope.sanatModalKapat = function () {
            $scope.sanatModalGoster = false;
            $scope.seciliSanat = null;
            $scope.sanatGaleriModalGoster = true; // Galeri modal'Ä±nÄ± geri aÃ§
          };

          // Sayfa yÃ¶nlendirme fonksiyonlarÄ±
          $scope.gotoYazilar = function () {
            window.location.href = "yazilar.html";
          };

          $scope.gotoSeyahat = function () {
            window.location.href = "seyahat.html";
          };

          $scope.gotoShow = function () {
            window.location.href = "show.html";
          };

          $scope.gotoSanat = function () {
            window.location.href = "sanat-kategoriler.html";
          };

          $scope.gotoYemekler = function () {
            window.location.href = "yemekler.html";
          };

          $scope.gotoSpor = function () {
            window.location.href = "spor.html";
          };

          // Kitaplar Carousel deÄŸiÅŸkenleri
          $scope.currentKitapSlide = 0;
          $scope.kitaplarCarousel = [];

          // KitaplarÄ± veritabanÄ±ndan yÃ¼kle (her yenilemede rastgele 8 kitap)
          var timestamp = Date.now();
          console.log("API Ã§aÄŸrÄ±sÄ± yapÄ±lÄ±yor, timestamp:", timestamp);
          $http
            .get("kitaplar_api.php?t=" + timestamp + "&r=" + Math.random())
            .then(function (response) {
              console.log("API Response:", response.data);
              if (response.data.success) {
                // VeritabanÄ±ndan gelen verileri carousel formatÄ±na dÃ¶nÃ¼ÅŸtÃ¼r
                $scope.kitaplarCarousel = response.data.kitaplar.map(function (
                  kitap
                ) {
                  return {
                    ad: kitap.kitap_adi,
                    yazar: kitap.yazar,
                    foto: kitap.kapak_url,
                    rating: Math.floor(Math.random() * 3) + 3, // Rastgele rating (3-5)
                    favorites: Math.floor(Math.random() * 1000) + 50, // Rastgele favori sayÄ±sÄ±
                    publisher: "GLOW YayÄ±nlarÄ±", // VarsayÄ±lan yayÄ±nevi
                  };
                });
                console.log(
                  "Rastgele 8 kitap yÃ¼klendi:",
                  $scope.kitaplarCarousel.length
                );
              } else {
                console.error(
                  "Kitaplar yÃ¼klenirken hata:",
                  response.data.error
                );
              }
            })
            .catch(function (error) {
              console.error("Kitaplar yÃ¼klenirken hata:", error);
            });

          // Kitaplar carousel fonksiyonlarÄ±
          $scope.nextKitapSlide = function () {
            var maxSlide = Math.max(0, $scope.kitaplarCarousel.length - 4);

            // EÄŸer son slide'daysak, baÅŸtan baÅŸla
            if ($scope.currentKitapSlide >= maxSlide) {
              $scope.currentKitapSlide = 0;
            } else {
              $scope.currentKitapSlide = Math.min(
                $scope.currentKitapSlide + 1,
                maxSlide
              );
            }
          };

          $scope.prevKitapSlide = function () {
            // EÄŸer ilk slide'daysak, sona git
            if ($scope.currentKitapSlide <= 0) {
              var maxSlide = Math.max(0, $scope.kitaplarCarousel.length - 4);
              $scope.currentKitapSlide = maxSlide;
            } else {
              $scope.currentKitapSlide = Math.max(
                $scope.currentKitapSlide - 1,
                0
              );
            }
          };

          // Kitap carousel'a tÄ±klama fonksiyonu
          $scope.kitapCarouselClick = function (kitap) {
            // Temiz URL iÃ§in kitap adÄ±nÄ± URL-friendly hale getir
            var urlFriendlyKitap = kitap.ad
              .toLowerCase()
              .replace(/[^a-zA-Z0-9Ã§ÄŸÄ±Ã¶ÅŸÃ¼Ã‡ÄIÄ°Ã–ÅÃœ]/g, "-")
              .replace(/-+/g, "-")
              .replace(/^-|-$/g, "");
            // URL encode et
            var encodedKitap = encodeURIComponent(urlFriendlyKitap);
            window.location.href = "kitap/" + encodedKitap;
          };

          // Kitaplar carousel otomatik kaydÄ±rma - 3 saniyede bir
          setInterval(function () {
            $scope.$apply(function () {
              $scope.nextKitapSlide();
            });
          }, 3000);

          // Filmler Carousel deÄŸiÅŸkenleri
          $scope.currentFilmSlide = 0;
          $scope.filmlerCarousel = [];

          // Filmleri veritabanÄ±ndan yÃ¼kle (her yenilemede rastgele 8 film)
          var filmTimestamp = Date.now();
          console.log(
            "Filmler API Ã§aÄŸrÄ±sÄ± yapÄ±lÄ±yor, timestamp:",
            filmTimestamp
          );
          $http
            .get("filmler_api.php?t=" + filmTimestamp + "&r=" + Math.random())
            .then(function (response) {
              console.log("Filmler API Response:", response.data);
              if (response.data.success) {
                // VeritabanÄ±ndan gelen verileri carousel formatÄ±na dÃ¶nÃ¼ÅŸtÃ¼r
                $scope.filmlerCarousel = response.data.filmler.map(function (
                  film
                ) {
                  return {
                    id: film.id,
                    film_adi: film.film_adi,
                    yonetmen: film.yonetmen,
                    poster_url: film.poster_url,
                    imdb_puani: film.imdb_puani,
                    yil: film.yil,
                    kategori: film.kategori,
                    tanitim: film.tanitim,
                  };
                });
                console.log(
                  "âœ… Rastgele 8 film yÃ¼klendi:",
                  $scope.filmlerCarousel.length
                );
                console.log("ğŸ“½ï¸ Filmler:", $scope.filmlerCarousel);
              } else {
                console.error(
                  "âŒ Filmler yÃ¼klenirken hata:",
                  response.data.error
                );
                // Hata durumunda boÅŸ array oluÅŸtur
                $scope.filmlerCarousel = [];
              }
            })
            .catch(function (error) {
              console.error("âŒ Filmler yÃ¼klenirken hata:", error);
              // Hata durumunda boÅŸ array oluÅŸtur
              $scope.filmlerCarousel = [];
            });

          // Filmler carousel fonksiyonlarÄ±
          $scope.nextFilmSlide = function () {
            var maxSlide = Math.max(0, $scope.filmlerCarousel.length - 4);

            // EÄŸer son slide'daysak, baÅŸtan baÅŸla
            if ($scope.currentFilmSlide >= maxSlide) {
              $scope.currentFilmSlide = 0;
            } else {
              $scope.currentFilmSlide = Math.min(
                $scope.currentFilmSlide + 1,
                maxSlide
              );
            }
          };

          $scope.prevFilmSlide = function () {
            // EÄŸer ilk slide'daysak, sona git
            if ($scope.currentFilmSlide <= 0) {
              var maxSlide = Math.max(0, $scope.filmlerCarousel.length - 4);
              $scope.currentFilmSlide = maxSlide;
            } else {
              $scope.currentFilmSlide = Math.max(
                $scope.currentFilmSlide - 1,
                0
              );
            }
          };

          // Film carousel'a tÄ±klama fonksiyonu
          $scope.filmCarouselClick = function (film) {
            window.location.href =
              "film-detay.html?id=" +
              film.id +
              "&film=" +
              encodeURIComponent(film.film_adi);
          };

          // Filmler carousel otomatik kaydÄ±rma - 3 saniyede bir
          setInterval(function () {
            $scope.$apply(function () {
              $scope.nextFilmSlide();
            });
          }, 3000);

          // DiÄŸer Carousel deÄŸiÅŸkenleri
          $scope.currentDigerSlide = 0;
          $scope.digerCarousel = [];

          // DiÄŸer iÃ§erikleri veritabanÄ±ndan yÃ¼kle (tiyatro, anime, belgesel)
          console.log("ğŸ¯ DiÄŸer iÃ§erikler yÃ¼kleniyor...");

          // Tiyatro eserlerini getir
          $http
            .get("api.php?tiyatro=1&limit=3")
            .then(function (tiyatroResponse) {
              console.log("ğŸ­ Tiyatro response:", tiyatroResponse.data);
              var tiyatroItems = [];
              if (tiyatroResponse.data && Array.isArray(tiyatroResponse.data)) {
                tiyatroItems = tiyatroResponse.data.map(function (eser) {
                  return {
                    id: eser.id,
                    ad: eser.eser_adi,
                    yazar: eser.yazar,
                    foto: eser.kapak_url || "assets/images/logo.jpg",
                    puan: eser.puan,
                    tip: "Tiyatro",
                    sayfa: "tiyatro-detay.html",
                  };
                });
              }

              // Animeleri getir
              $http
                .get("api.php?anime=1&limit=3")
                .then(function (animeResponse) {
                  console.log("ğŸ¬ Anime response:", animeResponse.data);
                  var animeItems = [];
                  if (animeResponse.data && Array.isArray(animeResponse.data)) {
                    animeItems = animeResponse.data.map(function (anime) {
                      return {
                        id: anime.id,
                        ad: anime.anime_adi,
                        yazar: anime.yonetmen,
                        foto: anime.kapak_url || "assets/images/logo.jpg",
                        puan: anime.puan,
                        tip: "Anime",
                        sayfa: "anime-detay.html",
                      };
                    });
                  }

                  // Belgeselleri getir
                  $http
                    .get("api.php?belgesel=1&limit=4")
                    .then(function (belgeselResponse) {
                      console.log(
                        "ğŸ“º Belgesel response:",
                        belgeselResponse.data
                      );
                      var belgeselItems = [];
                      if (
                        belgeselResponse.data &&
                        Array.isArray(belgeselResponse.data)
                      ) {
                        belgeselItems = belgeselResponse.data.map(function (
                          belgesel
                        ) {
                          return {
                            id: belgesel.id,
                            ad: belgesel.belgesel_adi,
                            yazar: belgesel.yonetmen,
                            foto:
                              belgesel.kapak_url || "assets/images/logo.jpg",
                            puan: belgesel.puan,
                            tip: "Belgesel",
                            sayfa: "belgesel-detay.html",
                          };
                        });
                      }

                      // TÃ¼m iÃ§erikleri birleÅŸtir ve karÄ±ÅŸtÄ±r
                      $scope.digerCarousel = tiyatroItems
                        .concat(animeItems)
                        .concat(belgeselItems);

                      // Array'i karÄ±ÅŸtÄ±r
                      for (
                        var i = $scope.digerCarousel.length - 1;
                        i > 0;
                        i--
                      ) {
                        var j = Math.floor(Math.random() * (i + 1));
                        var temp = $scope.digerCarousel[i];
                        $scope.digerCarousel[i] = $scope.digerCarousel[j];
                        $scope.digerCarousel[j] = temp;
                      }

                      console.log(
                        "âœ… DiÄŸer iÃ§erikler yÃ¼klendi:",
                        $scope.digerCarousel.length
                      );
                      console.log("ğŸ­ Tiyatro:", tiyatroItems.length);
                      console.log("ğŸ¬ Anime:", animeItems.length);
                      console.log("ğŸ“º Belgesel:", belgeselItems.length);
                    })
                    .catch(function (error) {
                      console.error("âŒ Belgeseller yÃ¼klenirken hata:", error);
                      // Hata durumunda boÅŸ array ile devam et
                      $scope.digerCarousel = tiyatroItems.concat(animeItems);
                    });
                })
                .catch(function (error) {
                  console.error("âŒ Animeler yÃ¼klenirken hata:", error);
                  // Hata durumunda sadece tiyatro ile devam et
                  $scope.digerCarousel = tiyatroItems;
                });
            })
            .catch(function (error) {
              console.error("âŒ Tiyatro eserleri yÃ¼klenirken hata:", error);
              // TÃ¼m API'ler baÅŸarÄ±sÄ±z olursa boÅŸ array
              $scope.digerCarousel = [];
            });

          // DiÄŸer carousel fonksiyonlarÄ±
          $scope.nextDigerSlide = function () {
            var maxSlide = Math.max(0, $scope.digerCarousel.length - 4);

            // EÄŸer son slide'daysak, baÅŸtan baÅŸla
            if ($scope.currentDigerSlide >= maxSlide) {
              $scope.currentDigerSlide = 0;
            } else {
              $scope.currentDigerSlide = Math.min(
                $scope.currentDigerSlide + 1,
                maxSlide
              );
            }
          };

          $scope.prevDigerSlide = function () {
            // EÄŸer ilk slide'daysak, sona git
            if ($scope.currentDigerSlide <= 0) {
              var maxSlide = Math.max(0, $scope.digerCarousel.length - 4);
              $scope.currentDigerSlide = maxSlide;
            } else {
              $scope.currentDigerSlide = Math.max(
                $scope.currentDigerSlide - 1,
                0
              );
            }
          };

          // DiÄŸer carousel'a tÄ±klama fonksiyonu
          $scope.digerCarouselClick = function (item) {
            window.location.href = item.sayfa + "?id=" + item.id;
          };

          // DiÄŸer carousel otomatik kaydÄ±rma - 4 saniyede bir
          setInterval(function () {
            $scope.$apply(function () {
              $scope.nextDigerSlide();
            });
          }, 4000);
        });
    </script>
  </body>
</html>
