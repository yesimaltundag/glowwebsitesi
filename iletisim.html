<!DOCTYPE html>
<html lang="tr" ng-app="GirisApp">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>İletişim - GLOW</title>

    <!-- CSS -->
    <link rel="stylesheet" href="assets/css/style.css" />

    <!-- AngularJS -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <script src="assets/js/app.js"></script>

    <!-- Page Specific CSS -->
    <style>
      .contact-container {
        position: relative;
        max-width: 100%;
        margin: 0;
        padding: 20px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 0;
        box-shadow: none;
        backdrop-filter: blur(10px);
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        text-align: center;
        width: 100%;
        min-height: 100vh;
      }

      /* Dark mode contact container */
      body.dark-theme .contact-container {
        background: rgba(44, 44, 44, 0.9) !important;
      }

      .contact-title {
        margin-bottom: 30px;
        font-size: 2rem;
        color: #7c5c4a;
        font-weight: 700;
        letter-spacing: 1px;
        text-shadow: 0 2px 12px rgba(124, 92, 74, 0.1);
        text-transform: uppercase;
      }

      /* Dark mode contact title */
      body.dark-theme .contact-title {
        color: #ffffff !important;
        text-shadow: 0 2px 12px rgba(0, 0, 0, 0.3) !important;
      }

      .contact-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
        margin: 20px 0;
      }

      .contact-bottom {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 20px;
        margin-top: 20px;
      }

      .contact-item {
        background: transparent;
        border-radius: 12px;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        padding: 30px 20px;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
        min-height: 150px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }

      /* Dark mode contact item */
      body.dark-theme .contact-item {
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4) !important;
      }

      .contact-item:hover {
        transform: translateY(-8px);
        box-shadow: 0 16px 48px rgba(0, 0, 0, 0.15);
      }

      /* Dark mode contact item hover */
      body.dark-theme .contact-item:hover {
        box-shadow: 0 16px 48px rgba(0, 0, 0, 0.6) !important;
      }

      .contact-item h3 {
        margin: 0 0 10px 0;
        color: #7c5c4a;
        font-size: 18px;
        font-weight: 600;
      }

      /* Dark mode contact item title */
      body.dark-theme .contact-item h3 {
        color: #ffffff !important;
      }

      .contact-item p {
        margin: 0;
        color: #666;
        font-size: 16px;
        line-height: 1.4;
      }

      /* Dark mode contact item paragraph */
      body.dark-theme .contact-item p {
        color: #cccccc !important;
      }

      .contact-item i {
        font-size: 20px;
        color: #b48a78;
        margin-bottom: 10px;
        display: block;
      }

      /* Dark mode contact item icon */
      body.dark-theme .contact-item i {
        color: #d4a574 !important;
      }

      .login-message {
        text-align: center;
        color: #7c5c4a;
        margin: 100px 0;
        font-size: 25px;
        background: rgba(255, 255, 255, 0.9);
        padding: 40px;
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
      }

      /* Dark mode login message */
      body.dark-theme .login-message {
        background: rgba(44, 44, 44, 0.9) !important;
        color: #ffffff !important;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4) !important;
      }

      .login-message a {
        color: #b48a78;
        text-decoration: none;
        font-weight: bold;
        margin: 0 10px;
      }

      /* Dark mode login message link */
      body.dark-theme .login-message a {
        color: #d4a574 !important;
      }

      .login-message a:hover {
        text-decoration: underline;
      }

      /* İletişim Formu Stilleri */
      .contact-form-container {
        margin-top: 50px;
        padding: 40px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
      }

      /* Dark mode contact form container */
      body.dark-theme .contact-form-container {
        background: rgba(44, 44, 44, 0.9) !important;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4) !important;
      }

      .form-title {
        color: #7c5c4a;
        font-size: 28px;
        font-weight: 600;
        text-align: center;
        margin-bottom: 30px;
      }

      /* Dark mode form title */
      body.dark-theme .form-title {
        color: #ffffff !important;
      }

      .contact-form {
        max-width: 800px;
        margin: 0 auto;
      }

      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 20px;
      }

      .form-group {
        margin-bottom: 35px;
        position: relative;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        color: #7c5c4a;
        font-weight: 600;
        font-size: 16px;
      }

      /* Dark mode form label */
      body.dark-theme .form-group label {
        color: #ffffff !important;
      }

      .form-group input,
      .form-group textarea {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 16px;
        font-family: inherit;
        transition: border-color 0.3s ease;
        background: rgba(255, 255, 255, 0.9);
        box-sizing: border-box;
      }

      /* Dark mode form input and textarea */
      body.dark-theme .form-group input,
      body.dark-theme .form-group textarea {
        background: rgba(60, 60, 60, 0.9) !important;
        color: #ffffff !important;
        border-color: #404040 !important;
      }

      .form-group input:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: #b48a78;
        box-shadow: 0 0 0 3px rgba(180, 138, 120, 0.1);
      }

      /* Dark mode form input and textarea focus */
      body.dark-theme .form-group input:focus,
      body.dark-theme .form-group textarea:focus {
        border-color: #d4a574 !important;
        box-shadow: 0 0 0 3px rgba(212, 165, 116, 0.3) !important;
      }

      .form-group input:invalid:not(:placeholder-shown),
      .form-group textarea:invalid:not(:placeholder-shown) {
        border-color: #dc3545;
        box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.1);
      }

      /* Sadece e-posta alanı için geçerli durum */
      .form-group input[type="email"]:valid:not(:placeholder-shown) {
        border-color: #28a745;
        box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.1);
      }

      .error-field {
        border-color: #dc3545 !important;
        box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.1) !important;
      }

      .error-message {
        color: #dc3545;
        font-size: 14px;
        margin-top: 5px;
        font-weight: 500;
        display: flex;
        align-items: center;
        position: absolute;
        top: 100%;
        left: 0;
        z-index: 10;
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 12px;
        border-radius: 6px;
        box-shadow: 0 2px 8px rgba(220, 53, 69, 0.2);
        backdrop-filter: blur(5px);
        border: 1px solid rgba(220, 53, 69, 0.3);
      }

      /* Dark mode error message */
      body.dark-theme .error-message {
        background: rgba(44, 44, 44, 0.95) !important;
        color: #ff6b6b !important;
        border-color: rgba(255, 107, 107, 0.3) !important;
      }

      .error-message::before {
        content: "⚠️";
        margin-right: 5px;
        font-size: 12px;
      }

      /* Toast Notification Stilleri */
      .toast-container {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 10000;
        pointer-events: none;
      }

      .toast {
        background: linear-gradient(135deg, #d4edda, #c3e6cb);
        border: 2px solid #28a745;
        border-radius: 12px;
        padding: 15px 20px;
        margin-bottom: 10px;
        box-shadow: 0 8px 32px rgba(40, 167, 69, 0.3);
        backdrop-filter: blur(10px);
        display: flex;
        align-items: center;
        gap: 12px;
        min-width: 300px;
        max-width: 400px;
        animation: slideInRight 0.3s ease-out;
        pointer-events: auto;
        position: relative;
      }

      /* Dark mode toast */
      body.dark-theme .toast {
        background: linear-gradient(135deg, #2c2c2c, #404040) !important;
        border-color: #28a745 !important;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6) !important;
      }

      .toast.error {
        background: linear-gradient(135deg, #f8d7da, #f5c6cb);
        border-color: #dc3545;
        box-shadow: 0 8px 32px rgba(220, 53, 69, 0.3);
      }

      /* Dark mode error toast */
      body.dark-theme .toast.error {
        background: linear-gradient(135deg, #2c2c2c, #404040) !important;
        border-color: #dc3545 !important;
      }

      .toast.success {
        background: linear-gradient(135deg, #d4edda, #c3e6cb);
        border-color: #28a745;
        box-shadow: 0 8px 32px rgba(40, 167, 69, 0.3);
      }

      /* Dark mode success toast */
      body.dark-theme .toast.success {
        background: linear-gradient(135deg, #2c2c2c, #404040) !important;
        border-color: #28a745 !important;
      }

      .toast-icon {
        font-size: 24px;
        flex-shrink: 0;
      }

      .toast-content {
        flex: 1;
        color: #155724;
        font-size: 14px;
        line-height: 1.4;
        font-weight: 500;
      }

      /* Dark mode toast content */
      body.dark-theme .toast-content {
        color: #ffffff !important;
      }

      .toast.error .toast-content {
        color: #721c24;
      }

      /* Dark mode error toast content */
      body.dark-theme .toast.error .toast-content {
        color: #ff6b6b !important;
      }

      .toast-close {
        background: none;
        border: none;
        color: #155724;
        font-size: 20px;
        cursor: pointer;
        padding: 0;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: all 0.2s ease;
        flex-shrink: 0;
      }

      /* Dark mode toast close button */
      body.dark-theme .toast-close {
        color: #ffffff !important;
      }

      .toast.error .toast-close {
        color: #721c24;
      }

      /* Dark mode error toast close button */
      body.dark-theme .toast.error .toast-close {
        color: #ff6b6b !important;
      }

      .toast-close:hover {
        background: rgba(21, 87, 36, 0.1);
        transform: scale(1.1);
      }

      /* Dark mode toast close button hover */
      body.dark-theme .toast-close:hover {
        background: rgba(255, 255, 255, 0.1) !important;
      }

      .toast.error .toast-close:hover {
        background: rgba(114, 28, 36, 0.1);
      }

      /* Dark mode error toast close button hover */
      body.dark-theme .toast.error .toast-close:hover {
        background: rgba(255, 107, 107, 0.1) !important;
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(100%);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes slideOutRight {
        from {
          opacity: 1;
          transform: translateX(0);
        }
        to {
          opacity: 0;
          transform: translateX(100%);
        }
      }

      .form-group textarea {
        resize: vertical;
        min-height: 120px;
      }

      /* Textarea için özel margin ayarı */
      .form-group:has(textarea) {
        margin-bottom: 40px;
      }

      .character-count {
        text-align: right;
        font-size: 14px;
        color: #666;
        margin-top: 5px;
      }

      /* Dark mode character count */
      body.dark-theme .character-count {
        color: #cccccc !important;
      }

      .submit-btn {
        width: 100%;
        padding: 15px 30px;
        background: linear-gradient(135deg, #e2d9d0, #d1c6b1, #f8e0e1, #c0b2b0);
        color: #7c5c4a;
        border: none;
        border-radius: 8px;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 20px;
      }

      /* Dark mode submit button */
      body.dark-theme .submit-btn {
        background: linear-gradient(135deg, #7c5c4a, #5a4435, #8a6a5a, #6a5445) !important;
        color: #ffffff !important;
      }

      .submit-btn:hover:not(:disabled) {
        background: linear-gradient(135deg, #f8e0e1, #d1c6b1, #e2d9d0, #c0b2b0);
        transform: translateY(-2px);
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
      }

      /* Dark mode submit button hover */
      body.dark-theme .submit-btn:hover:not(:disabled) {
        background: linear-gradient(135deg, #8a6a5a, #6a5445, #9a7a6a, #7a6455) !important;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4) !important;
      }

      .submit-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      .user-info {
        background: rgba(180, 138, 120, 0.1);
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 30px;
        border-left: 4px solid #b48a78;
      }

      /* Dark mode user info */
      body.dark-theme .user-info {
        background: rgba(212, 165, 116, 0.1) !important;
        border-left-color: #d4a574 !important;
      }

      .user-info p {
        margin: 5px 0;
        color: #7c5c4a;
        font-size: 16px;
      }

      /* Dark mode user info paragraph */
      body.dark-theme .user-info p {
        color: #ffffff !important;
      }

      .user-info strong {
        color: #b48a78;
      }

      /* Dark mode user info strong */
      body.dark-theme .user-info strong {
        color: #d4a574 !important;
      }

      .form-info {
        background: rgba(180, 138, 120, 0.1);
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
        border-left: 4px solid #b48a78;
        text-align: center;
      }

      /* Dark mode form info */
      body.dark-theme .form-info {
        background: rgba(212, 165, 116, 0.1) !important;
        border-left-color: #d4a574 !important;
      }

      .form-info p {
        margin: 0;
        color: #7c5c4a;
        font-size: 16px;
      }

      /* Dark mode form info paragraph */
      body.dark-theme .form-info p {
        color: #ffffff !important;
      }

      .form-info strong {
        color: #b48a78;
      }

      /* Dark mode form info strong */
      body.dark-theme .form-info strong {
        color: #d4a574 !important;
      }

      .email-warning {
        background: rgba(255, 193, 7, 0.1);
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 30px;
        border-left: 4px solid #ffc107;
        text-align: center;
      }

      /* Dark mode email warning */
      body.dark-theme .email-warning {
        background: rgba(255, 193, 7, 0.15) !important;
        border-left-color: #ffc107 !important;
      }

      .email-warning p {
        margin: 5px 0;
        color: #856404;
        font-size: 16px;
      }

      /* Dark mode email warning paragraph */
      body.dark-theme .email-warning p {
        color: #ffd700 !important;
      }

      .email-warning strong {
        color: #ffc107;
      }

      /* Dark mode email warning strong */
      body.dark-theme .email-warning strong {
        color: #ffd700 !important;
      }

      .email-warning a {
        color: #b48a78;
        text-decoration: none;
        font-weight: bold;
      }

      /* Dark mode email warning link */
      body.dark-theme .email-warning a {
        color: #d4a574 !important;
      }

      .email-warning a:hover {
        text-decoration: underline;
      }

      /* Placeholder dark mode */
      body.dark-theme .form-group input::placeholder,
      body.dark-theme .form-group textarea::placeholder {
        color: #888888 !important;
      }

      @media (max-width: 768px) {
        .contact-container {
          margin: 20px;
          padding: 20px;
          max-width: 100%;
        }

        .contact-title {
          font-size: 2rem;
        }

        .contact-grid {
          grid-template-columns: 1fr;
          gap: 20px;
        }

        .contact-bottom {
          grid-template-columns: repeat(2, 1fr);
          gap: 20px;
        }

        .contact-item {
          padding: 30px 20px;
          min-height: 150px;
        }

        .contact-form-container {
          padding: 20px;
        }

        .form-row {
          grid-template-columns: 1fr;
          gap: 15px;
        }

        .form-title {
          font-size: 24px;
        }
      }
    </style>
  </head>
  <body ng-controller="MainController">
    <!-- Header Component -->
    <ng-include src="'components/header.html'"></ng-include>

    <!-- Main Content -->
    <main class="main-content">
      <div ng-controller="IletisimController">
        <!-- Giriş yapmamış kullanıcılar için mesaj -->
        <div ng-if="!kullanici" class="login-message">
          Bu içeriği görmek için lütfen
          <a href="index.html">giriş yapın</a> veya
          <a href="kayit.html">kayıt olun</a>.
        </div>

        <!-- Giriş yapmış kullanıcılar için içerik -->
        <div class="contact-container">
          <h2 class="contact-title">İLETİŞİM</h2>
          <div class="contact-grid">
            <div class="contact-item" style="padding: 0; min-height: 300px">
              <div
                style="
                  border-radius: 12px;
                  overflow: hidden;
                  box-shadow: 0 2px 12px rgba(124, 92, 74, 0.08);
                  width: 100%;
                  height: 100%;
                "
              >
                <iframe
                  src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3010.9053747099806!2d28.665045976713127!3d41.005444271350875!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x14caa1baf78be10d%3A0x4180090b13edab41!2sTekprosis%20Bilgisayar%20Mikro%20Yaz%C4%B1l%C4%B1m!5e0!3m2!1str!2str!4v1755095798462!5m2!1str!2str"
                  width="100%"
                  height="100%"
                  style="border: 0; min-height: 600px"
                  allowfullscreen=""
                  loading="lazy"
                  referrerpolicy="no-referrer-when-downgrade"
                  title="İstanbul Harita"
                ></iframe>
              </div>
            </div>
          </div>

          <div class="contact-bottom">
            <div class="contact-item">
              <i>📍</i>
              <h3>Adres</h3>
              <p>
                Nanna Plaza, Yakuplu, 208 Sk No:23 Kat:3 D:3, 34524
                Beylikdüzü/İstanbul<br />34000
              </p>
            </div>
            <div class="contact-item">
              <i>✉️</i>
              <h3>E-posta</h3>
              <p>info@glowtech.com<br />destek@glowtech.com</p>
            </div>
            <div class="contact-item">
              <i>📞</i>
              <h3>Telefon</h3>
              <p>0 (212) 123 45 67<br />+90 532 123 45 67</p>
            </div>
            <div class="contact-item">
              <i>🕒</i>
              <h3>Çalışma Saatleri</h3>
              <p>Pazartesi - Cuma<br />09:00 - 18:00</p>
            </div>
          </div>

          <!-- İletişim Formu -->
          <div class="contact-form-container">
            <h3 class="form-title">Bizimle İletişime Geçin</h3>

            <!-- Form başlığı -->
            <div class="form-info">
              <p>
                <strong
                  >Mesajınızı göndermek için aşağıdaki alanları
                  doldurun:</strong
                >
              </p>
            </div>

            <!-- E-posta bildirimi bilgisi -->
            <div class="email-warning">
              <p>
                <strong>📧 E-posta Bildirimi:</strong> Mesajınız gönderildikten
                sonra admin ekibimize otomatik olarak e-posta bildirimi
                gönderilecektir.
              </p>
              <p>
                <strong>⏱️ Yanıt Süresi:</strong> Mesajınıza en kısa sürede
                dönüş yapılacaktır.
              </p>
            </div>

            <form ng-submit="mesajGonder()" class="contact-form" novalidate>
              <!-- Debug bilgisi -->

              <div class="form-row">
                <div class="form-group">
                  <label for="username">Ad Soyad</label>
                  <input
                    type="text"
                    id="username"
                    ng-model="mesajForm.username"
                    placeholder="Adınız ve soyadınız"
                    ng-class="{'error-field': formErrors.username}"
                    required
                  />
                  <div
                    ng-if="formErrors.username && formSubmitted"
                    class="error-message"
                  >
                    Ad soyad alanı zorunludur
                  </div>
                </div>
                <div class="form-group">
                  <label for="email">E-posta</label>
                  <input
                    type="email"
                    id="email"
                    ng-model="mesajForm.email"
                    placeholder="E-posta adresiniz"
                    pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                    title="Geçerli bir e-posta adresi giriniz (örn: ornek@domain.com)"
                    ng-class="{'error-field': formErrors.email}"
                    required
                  />
                  <div
                    ng-if="formErrors.email && formSubmitted"
                    class="error-message"
                  >
                    Geçerli bir e-posta adresi giriniz
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="konu">Konu</label>
                <input
                  type="text"
                  id="konu"
                  ng-model="mesajForm.konu"
                  placeholder="Mesajınızın konusu"
                  ng-class="{'error-field': formErrors.konu}"
                  required
                />
                <div
                  ng-if="formErrors.konu && formSubmitted"
                  class="error-message"
                >
                  Konu alanı zorunludur
                </div>
              </div>
              <div class="form-group">
                <label for="message">Mesajınız</label>
                <textarea
                  id="message"
                  ng-model="mesajForm.message"
                  placeholder="Mesajınızı yazın (en az 10 karakter)"
                  rows="5"
                  maxlength="300"
                  ng-class="{'error-field': formErrors.message}"
                  required
                ></textarea>
                <div class="character-count">
                  {{ mesajForm.message ? mesajForm.message.length : 0 }}/300
                </div>
                <div
                  ng-if="formErrors.message && formSubmitted"
                  class="error-message"
                >
                  Mesaj en az 10 karakter olmalıdır
                </div>
              </div>
              <button
                type="submit"
                class="submit-btn"
                ng-disabled="false"
                title="Ad Soyad: {{ mesajForm.username ? 'Dolu' : 'Boş' }}, E-posta: {{ mesajForm.email ? 'Dolu' : 'Boş' }}, Konu: {{ mesajForm.konu ? 'Dolu' : 'Boş' }}, Mesaj: {{ mesajForm.message ? mesajForm.message.length + ' karakter' : 'Boş' }}"
                style="position: relative"
              >
                Mesaj Gönder
              </button>
            </form>
          </div>
        </div>
      </div>
    </main>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Footer Component -->
    <ng-include src="'components/footer.html'"></ng-include>

    <!-- Scroll to Top Button -->
    <button id="scrollTopBtn" title="Yukarı Çık" ng-click="scrollToTop()">
      ↑
    </button>

    <script>
      angular
        .module("GirisApp")
        .controller("IletisimController", function ($scope, $http) {
          $scope.kullanici = JSON.parse(
            localStorage.getItem("girisYapan") || "null"
          );

          $scope.mesajForm = {
            username: "",
            email: "",
            konu: "",
            message: "",
          };

          // E-posta validasyon fonksiyonu
          $scope.validateEmail = function (email) {
            var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
          };

          // Form validasyon durumu
          $scope.formErrors = {
            username: false,
            email: false,
            konu: false,
            message: false,
          };

          // Form gönderilme durumu
          $scope.formSubmitted = false;

          $scope.mesajGonder = function () {
            // Form gönderildi olarak işaretle
            $scope.formSubmitted = true;

            // Form validasyon durumlarını sıfırla
            $scope.formErrors = {
              username: false,
              email: false,
              konu: false,
              message: false,
            };

            var hasError = false;

            // Ad soyad kontrolü
            if (
              !$scope.mesajForm.username ||
              $scope.mesajForm.username.trim() === ""
            ) {
              $scope.formErrors.username = true;
              hasError = true;
            }

            // E-posta kontrolü
            if (
              !$scope.mesajForm.email ||
              $scope.mesajForm.email.trim() === ""
            ) {
              $scope.formErrors.email = true;
              hasError = true;
            } else if (!$scope.validateEmail($scope.mesajForm.email)) {
              $scope.formErrors.email = true;
              hasError = true;
            }

            // Konu kontrolü
            if (!$scope.mesajForm.konu || $scope.mesajForm.konu.trim() === "") {
              $scope.formErrors.konu = true;
              hasError = true;
            }

            // Mesaj kontrolü
            if (
              !$scope.mesajForm.message ||
              $scope.mesajForm.message.trim() === ""
            ) {
              $scope.formErrors.message = true;
              hasError = true;
            } else if ($scope.mesajForm.message.trim().length < 10) {
              $scope.formErrors.message = true;
              hasError = true;
            }

            if (hasError) {
              showToast(
                "Lütfen tüm alanları doğru şekilde doldurunuz!",
                "error"
              );
              return;
            }

            // Mesaj verilerini hazırla
            var mesajData = {
              username: $scope.mesajForm.username,
              email: $scope.mesajForm.email,
              konu: $scope.mesajForm.konu,
              message: $scope.mesajForm.message,
            };

            $http
              .post("api.php?iletisim=1", mesajData)
              .then(function (response) {
                console.log("API yanıtı:", response);
                if (response.data && response.data.success) {
                  showToast("Mesajınız başarıyla gönderildi!", "success");
                  // Formu tamamen temizle
                  $scope.mesajForm = {
                    username: "",
                    email: "",
                    konu: "",
                    message: "",
                  };
                  // Hata durumlarını temizle
                  $scope.formErrors = {
                    username: false,
                    email: false,
                    konu: false,
                    message: false,
                  };
                  // Form gönderilme durumunu sıfırla
                  $scope.formSubmitted = false;
                } else {
                  var errorMsg = "Mesaj gönderilemedi";
                  if (response.data && response.data.message) {
                    errorMsg += ": " + response.data.message;
                  }
                  showToast(errorMsg, "error");
                }
              })
              .catch(function (error) {
                console.error("Hata detayı:", error);
                var errorMessage = "Bir hata oluştu";
                if (error.statusText) {
                  errorMessage += ": " + error.statusText;
                } else if (error.message) {
                  errorMessage += ": " + error.message;
                } else if (error.data && error.data.message) {
                  errorMessage += ": " + error.data.message;
                }
                showToast(errorMessage, "error");
              });
          };

          $scope.scrollToTop = function () {
            window.scrollTo({ top: 0, behavior: "smooth" });
          };

          // Toast notification fonksiyonu
          function showToast(message, type = "success") {
            var container = document.getElementById("toastContainer");
            if (!container) return;

            var toast = document.createElement("div");
            toast.className = "toast " + type;

            var icon = type === "success" ? "✅" : "❌";
            var content = message;

            toast.innerHTML = `
              <div class="toast-icon">${icon}</div>
              <div class="toast-content">${content}</div>
              <button class="toast-close" onclick="this.parentElement.remove()">×</button>
            `;

            container.appendChild(toast);

            // 4 saniye sonra otomatik kaldır
            setTimeout(function () {
              if (toast.parentNode) {
                toast.style.animation = "slideOutRight 0.3s ease-out";
                setTimeout(function () {
                  if (toast.parentNode) {
                    toast.remove();
                  }
                }, 300);
              }
            }, 4000);
          }
        });
    </script>
  </body>
</html>
