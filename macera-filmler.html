<!DOCTYPE html>
<html lang="tr" ng-app="GirisApp">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Macera Filmleri - GLOW</title>
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/film-styles.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <script src="assets/js/app.js"></script>
  </head>
  <body ng-controller="MaceraFilmlerController">
    <ng-include src="'components/header.html'"></ng-include>
    <main>
      <div class="filmler-container">
        <div class="filmler-title">üó∫Ô∏è Macera Filmleri</div>
        <button class="geri-btn" onclick="window.history.back()">‚Üê</button>
        
        <style>
          /* Dark theme styles for macera-filmler.html */
          body.dark-theme .filmler-container {
            background: rgba(44, 44, 44, 0.92) !important;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
          }
          
          body.dark-theme .filmler-title {
            color: #e0e0e0 !important;
          }
          
          body.dark-theme .film-card {
            background: rgba(44, 44, 44, 0.9) !important;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3) !important;
            border-color: rgba(255, 255, 255, 0.1) !important;
          }
          
          body.dark-theme .film-card:hover {
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4) !important;
            border-color: rgba(255, 255, 255, 0.2) !important;
          }
          
          body.dark-theme .film-baslik {
            color: #e0e0e0 !important;
          }
          
          body.dark-theme .film-yil {
            color: #b0b0b0 !important;
          }
          
          body.dark-theme .film-imdb {
            color: #b0b0b0 !important;
          }
          
          body.dark-theme .film-ozet {
            color: #e0e0e0 !important;
          }
          
          body.dark-theme .film-btn {
            background: linear-gradient(135deg, #404040, #2c2c2c) !important;
            color: #e0e0e0 !important;
          }
          
          body.dark-theme .film-btn:hover {
            background: linear-gradient(135deg, #606060, #404040) !important;
            color: #fff !important;
          }
          
          body.dark-theme .geri-btn {
            background: linear-gradient(135deg, #404040, #2c2c2c) !important;
            color: #e0e0e0 !important;
          }
          
          body.dark-theme .geri-btn:hover {
            background: linear-gradient(135deg, #606060, #404040) !important;
            color: #fff !important;
          }
          
          body.dark-theme .loading {
            color: #e0e0e0 !important;
          }
          
          body.dark-theme .error {
            color: #ff6b6b !important;
          }
        </style>

        <!-- Loading durumu -->
        <div ng-if="loading" class="loading">
          <p>Filmler y√ºkleniyor...</p>
        </div>

        <!-- Hata durumu -->
        <div ng-if="error" class="error">
          <p>{{ error }}</p>
        </div>

        <!-- Film listesi -->
        <div class="filmler-grid" ng-if="!loading && !error">
          <div
            class="film-card"
            ng-repeat="film in filmler"
            ng-click="filmDetay(film.id)"
          >
            <img
              ng-src="{{ film.poster_url }}"
              ng-alt="{{ film.film_adi }}"
              class="film-poster"
              onerror="this.src='https://via.placeholder.com/300x450/cccccc/666666?text=Poster+Bulunamadƒ±'"
            />
            <div class="film-icerik">
              <div class="film-baslik">{{ film.film_adi }}</div>
              <div class="film-yil">{{ film.yil }}</div>
              <div class="film-imdb">IMDb: {{ film.imdb_puani }}</div>
              <div class="film-ozet">{{ film.ozet }}</div>
              <button class="film-btn">Detaylarƒ± G√∂r</button>
            </div>
          </div>
        </div>
      </div>
    </main>
    <ng-include src="'components/footer.html'"></ng-include>
    <button id="scrollTopBtn" title="Yukarƒ± √áƒ±k" ng-click="scrollToTop()">
      ‚Üë
    </button>
    <script>
      angular
        .module("GirisApp")
        .controller("MaceraFilmlerController", function ($scope, $http) {
          $scope.loading = true;
          $scope.error = null;
          $scope.filmler = [];

          // Veritabanƒ±ndan filmleri √ßek
          $http
            .get("api.php?films=1&kategori=Macera")
            .then(function (response) {
              $scope.filmler = response.data;
              $scope.loading = false;
            })
            .catch(function (error) {
              $scope.error =
                "Filmler y√ºklenirken hata olu≈ütu: " + error.data.message;
              $scope.loading = false;
            });

          $scope.filmDetay = function (filmId) {
            window.location.href = "film-detay.html?id=" + filmId;
          };

          $scope.scrollToTop = function () {
            window.scrollTo({ top: 0, behavior: "smooth" });
          };
        });
    </script>
  </body>
</html>
